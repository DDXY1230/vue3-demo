{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["// 公共方法\nexport function isObject(target) {\n  return typeof target === 'object' && target != null\n}\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = (val) => typeof val === 'function'\nexport const isNumber = val => typeof val === 'number'\nexport const isString = val => typeof val === 'string'\nexport const isIntegerKey = (key) => parseInt(key) === key\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (val: object, key: string | symbol): key is keyof typeof val => hasOwnProperty.call(val, key)\nexport const hasChanged = (value, oldValue) => value !== oldValue","import { isArray,isIntegerKey } from '@vue/shared';\nimport { TriggerOpTypes } from './operations'\n//1.定义effect\nexport function effect(fn, options: any = {}) {\n  const effect = createReactEffect(fn, options)\n  if (!options.lazy) {\n    effect()\n  }\n}\nlet uid = 0\nlet activeEffect = null\nconst effectStack = []\n\nfunction createReactEffect(fn, options) {\n  const effect = function reactiveEffect() {\n    if (!effectStack.includes(effect)) {\n      try {\n        console.log('执行用户传的方法')\n        // 入栈\n        effectStack.push(effect)\n        activeEffect = effect\n        fn()\n      } finally {\n        effectStack.pop()\n        activeEffect = effectStack[effectStack.length - 1]\n      }\n    }\n  }\n  effect.id = uid++ // 区别effect\n  effect._isEffect = true // 区分是不是响应式\n  effect.raw = fn\n  effect.options = options\n  return effect\n}\n// 收集effect\nlet targetMap = new WeakMap()\nexport function Track(target, type, key) {\n  // \n  console.log(\"Track==>\", target, type, key, activeEffect)\n  // 对应的key\n  // key 和我们的effect一一对应 map=》key=》target=》  属性=》[effect]\n  if(activeEffect == undefined) { // 没有在effect中使用\n    return\n  }\n  // 获取effect\n  let depMap = targetMap.get(target)\n  if(!depMap) {\n    targetMap.set(target, (depMap = new Map())) // 添加值\n  }\n  // 有值的情况\n  let dep = depMap.get(key)\n  if(!dep) {\n    // 没有属性的话\n    depMap.set(key, (dep = new Set()))\n  }\n  if(!dep.has(activeEffect)) {\n    dep.add(activeEffect)\n  }\n  console.log(targetMap)\n}\n// 触发更新\nexport function trigger(target, type,key?,newValue?, oldValue?) {\n   console.log('trigger==>', target, type,key,newValue, oldValue)\n  console.log('targetMap===',targetMap)\n  const depsMap = targetMap.get(target)\n  console.log('depsMap这里是', depsMap)\n  if(!depsMap) {return}\n  // let effect = depsMap.get[key]// set[]\n  let effectSet = new Set()\n  const add = (effectAdd) => {\n    if(effectAdd) {\n      effectAdd.forEach(effect=>effectSet.add(effect))\n    }\n  }\n  // add(depsMap.get(key))\n  // 处理数组\n  if(key === 'length' && isArray(target)) {\n    console.log('进入数组处理')\n    depsMap.forEach((dep, key) => {\n      console.log('depsMap=====>',depsMap)\n      if(key === 'length' || key >= (newValue as number)) {\n        add(dep)\n      }  \n    })\n  }else {\n    if(key !== undefined) {\n      add(depsMap.get(key))\n    }\n    switch(type) {\n      case TriggerOpTypes.ADD:\n        if(isArray(target) && isIntegerKey(key)){\n          add(depsMap.get('length'))\n        }\n    }\n  }\n  effectSet.forEach((effect:any) => {\n    if(effect.options.sch(effect)){\n      effect.options.sch(effect)\n    }else {\n      effect()\n    }\n  })\n}","import { isObject, isArray,hasChanged, isFunction, isNumber, isString, isIntegerKey, hasOwn } from \"@vue/shared\"\nimport { readonly, reactive } from \"./reactive\"\nimport { TrackOpType,TriggerOpTypes } from './operations'\nimport { Track,trigger } from './effect'\n// get\nconst get = createGetter() // 不是只读,不是浅的\nconst shallowGet = createGetter(false, true) // 不是只读, 是浅的\nconst readonlyGet = createGetter(true)// 是只读, 不是浅的\nconst shallowReadonlyGet = createGetter(true, true) // 是只读, 是浅的\n// set 是不是深的\nconst set = createSetter()\nconst shallowSet = createSetter(true)\nexport const reactiveHandlers = {\n  get,\n  set\n}\nexport const shallowReactiveHandlers = {\n  get: shallowGet,\n  set: shallowSet\n}\nexport const readonlyHandlers = {\n  get: readonlyGet,\n  set: (target, key, value) => {\n    console.log('set on key is faild')\n  }\n}\nexport const shallowReadonlyHandlers = {\n  get: shallowReadonlyGet,\n  set: (target, key, value) => {\n    console.log('set on key is faild')\n  }\n}\n\nfunction createGetter(isReadOnly = false, shallow = false) {\n  return function get(target, key, receiver) {\n    // proxy + reflect搭配使用\n    const res = Reflect.get(target, key, receiver)// target[key]\n    if (!isReadOnly) {\n      // 收集依赖\n      Track(target, TrackOpType.GET, key)\n\n    }\n    if (shallow) {\n      return res\n    }\n    // \n    if (isObject(res)) {\n      return isReadOnly ? readonly(res) : reactive(res) // 递归\n    }\n    // return res + '  <<<-代理后的结果'\n    console.log(res + '  <<<-代理后的结果')\n    return res\n  }\n}\nfunction createSetter(shallow = false) {\n  return function set(target, key, value, receiver) {\n    const oldValue = target[key]\n    console.log('oldValue', oldValue)\n    // 判断是否是数组\n    let haskey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key)\n    console.log(haskey)\n    if (!haskey) {\n      // 没有 就是新增值\n      trigger(target, TriggerOpTypes.ADD, key, value)\n    }else{\n      // 修改\n      if(hasChanged(value, oldValue)){\n\n      trigger(target, TriggerOpTypes.SET,key,value,oldValue)\n      }\n    }\n    const result = Reflect.set(target, key, value, receiver) // 设置最新值并返回设置是否成功 true / false\n    console.log('set==>result=> ', result)\n    return result\n  }\n}\n","import { isObject } from \"@vue/shared\"\nimport {reactiveHandlers,shallowReactiveHandlers,readonlyHandlers,shallowReadonlyHandlers} from './baseHandlers'\n\n\nexport function reactive(target) {\n  return createReactObj(target, false, reactiveHandlers)\n}\nexport function shallowReactive(target) {\n  return createReactObj(target, false, shallowReactiveHandlers)\n\n}\nexport function readonly(target) {\n  return createReactObj(target, true, readonlyHandlers)\n\n}\nexport function shallowReadonly(target) {\n  return createReactObj(target, true, shallowReadonlyHandlers)\n}\n// 数据结构\nconst reactiveMap = new WeakMap() // key 必须是对象, 自动垃圾回收 用来存放代理对象\nconst readonlyMap = new WeakMap() // 用来存放代理对象\n// 实现代理的核心\nfunction createReactObj(target, isReadonly, baseHandlers) {\n  \n  // proxy() 对象\n  if(!isObject(target)) {\n    return target // 不是对象不进行处理\n  }\n  const proxymap = isReadonly? readonlyMap : reactiveMap\n  const proxyEs = proxymap.get(target)\n  if(proxyEs) {\n    return proxyEs // 已经代理的直接返回\n  }\n  // 核心  proxy\n  const proxy = new Proxy(target, baseHandlers)\n  proxymap.set(target, proxy) // 存放数据,不会重复代理\n  return proxy\n}","import { hasChanged,isArray } from '@vue/shared';\nimport { Track, trigger } from \"./effect\"\nimport { TrackOpType,TriggerOpTypes } from \"./operations\"\n\n// \nexport function ref(target) {\n  return createRef(target)\n}\nexport function shallowRef(target) {\n  return createRef(target,true)\n}\nclass RefImpl{\n  public __v_isRef = true\n  public _value\n  constructor(public rawValue,public shallow) {\n    this._value = rawValue // 用户传入的值\n  }\n  get value() {\n    Track(this, TrackOpType.GET, 'value') // 收集依赖\n    return this._value\n  }\n  set value(newValue) {\n    if(hasChanged) {\n      this._value = newValue\n      this.rawValue = newValue\n      trigger(this,TriggerOpTypes.SET, 'value', newValue)\n    }\n  }\n}\nfunction createRef(target, shallow = false) {\n  return new RefImpl(target, shallow)\n} \nexport function toRef(target,key) {\n  return new ObjectRefImpl(target,key)\n}\nclass ObjectRefImpl{\n  public __v_isRef = true\n  constructor(public target,public key) {\n\n  }\n  get value() {\n    return this.target[this.key]\n  }\n  set value(newValue) {\n    this.target[this.key] = newValue\n  }\n}\nexport function toRefs(target) {\n  let ret = isArray(target) ? new Array(target.length) : {}\n  for(let key in target) {\n    ret[key] = toRef(target, key)\n  }\n  return ret\n}","import { isFunction } from '@vue/shared';\nimport { effect } from './effect'\nexport function computed(getterOrOptions) {\n  // 传过来的参数可能是函数或者对象\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions,\n      setter = () => {\n        console.log('computed value must be readonly')\n      }\n  } else {\n    getter = getterOrOptions.get\n    setter = getterOrOptions\n  }\n  //返回值\n  return new ComputedRefImpl(getter, setter)\n}\nclass ComputedRefImpl {\n  public _dirty = true;\n  public _value;\n  public effect\n  constructor(getter, public setter) {\n    this.effect = effect(getter, {\n      lazy: true, sch: () => {\n        if (!this._dirty) {\n          this._dirty = true\n        }\n      }\n    })\n  }\n  get value() {\n    if (this._dirty) {\n      this._value = this.effect()\n      this._dirty = false\n    }\n    return this._value\n  }\n  set value(newValue) {\n    this._value = newValue\n  }\n}"],"names":[],"mappings":"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"}