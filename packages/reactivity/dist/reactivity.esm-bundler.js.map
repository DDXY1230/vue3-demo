{"version":3,"file":"reactivity.esm-bundler.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["// 公共方法\nexport function isObject(target) {\n  return typeof target === 'object' && target != null\n}\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = (val) => typeof val === 'function'\nexport const isNumber = val => typeof val === 'number'\nexport const isString = val => typeof val === 'string'\nexport const isIntegerKey = (key) => parseInt(key) === key\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (val: object, key: string | symbol): key is keyof typeof val => hasOwnProperty.call(val, key)\nexport const hasChanged = (value, oldValue) => value !== oldValue","import { isArray,isIntegerKey } from '@vue/shared';\nimport { TriggerOpTypes } from './operations'\n//1.定义effect\nexport function effect(fn, options: any = {}) {\n  const effect = createReactEffect(fn, options)\n  if (!options.lazy) {\n    effect()\n  }\n}\nlet uid = 0\nlet activeEffect = null\nconst effectStack = []\n\nfunction createReactEffect(fn, options) {\n  const effect = function reactiveEffect() {\n    if (!effectStack.includes(effect)) {\n      try {\n        console.log('执行用户传的方法')\n        // 入栈\n        effectStack.push(effect)\n        activeEffect = effect\n        fn()\n      } finally {\n        effectStack.pop()\n        activeEffect = effectStack[effectStack.length - 1]\n      }\n    }\n  }\n  effect.id = uid++ // 区别effect\n  effect._isEffect = true // 区分是不是响应式\n  effect.raw = fn\n  effect.options = options\n  return effect\n}\n// 收集effect\nlet targetMap = new WeakMap()\nexport function Track(target, type, key) {\n  // \n  console.log(\"Track==>\", target, type, key, activeEffect)\n  // 对应的key\n  // key 和我们的effect一一对应 map=》key=》target=》  属性=》[effect]\n  if(activeEffect == undefined) { // 没有在effect中使用\n    return\n  }\n  // 获取effect\n  let depMap = targetMap.get(target)\n  if(!depMap) {\n    targetMap.set(target, (depMap = new Map())) // 添加值\n  }\n  // 有值的情况\n  let dep = depMap.get(key)\n  if(!dep) {\n    // 没有属性的话\n    depMap.set(key, (dep = new Set()))\n  }\n  if(!dep.has(activeEffect)) {\n    dep.add(activeEffect)\n  }\n  console.log(targetMap)\n}\n// 触发更新\nexport function trigger(target, type,key?,newValue?, oldValue?) {\n   console.log('trigger==>', target, type,key,newValue, oldValue)\n  console.log('targetMap===',targetMap)\n  const depsMap = targetMap.get(target)\n  console.log('depsMap这里是', depsMap)\n  if(!depsMap) {return}\n  // let effect = depsMap.get[key]// set[]\n  let effectSet = new Set()\n  const add = (effectAdd) => {\n    if(effectAdd) {\n      effectAdd.forEach(effect=>effectSet.add(effect))\n    }\n  }\n  // add(depsMap.get(key))\n  // 处理数组\n  if(key === 'length' && isArray(target)) {\n    console.log('进入数组处理')\n    depsMap.forEach((dep, key) => {\n      console.log('depsMap=====>',depsMap)\n      if(key === 'length' || key >= (newValue as number)) {\n        add(dep)\n      }  \n    })\n  }else {\n    if(key !== undefined) {\n      add(depsMap.get(key))\n    }\n    switch(type) {\n      case TriggerOpTypes.ADD:\n        if(isArray(target) && isIntegerKey(key)){\n          add(depsMap.get('length'))\n        }\n    }\n  }\n  effectSet.forEach((effect:any) => {\n    if(effect.options.sch(effect)){\n      effect.options.sch(effect)\n    }else {\n      effect()\n    }\n  })\n}","import { isObject, isArray,hasChanged, isFunction, isNumber, isString, isIntegerKey, hasOwn } from \"@vue/shared\"\nimport { readonly, reactive } from \"./reactive\"\nimport { TrackOpType,TriggerOpTypes } from './operations'\nimport { Track,trigger } from './effect'\n// get\nconst get = createGetter() // 不是只读,不是浅的\nconst shallowGet = createGetter(false, true) // 不是只读, 是浅的\nconst readonlyGet = createGetter(true)// 是只读, 不是浅的\nconst shallowReadonlyGet = createGetter(true, true) // 是只读, 是浅的\n// set 是不是深的\nconst set = createSetter()\nconst shallowSet = createSetter(true)\nexport const reactiveHandlers = {\n  get,\n  set\n}\nexport const shallowReactiveHandlers = {\n  get: shallowGet,\n  set: shallowSet\n}\nexport const readonlyHandlers = {\n  get: readonlyGet,\n  set: (target, key, value) => {\n    console.log('set on key is faild')\n  }\n}\nexport const shallowReadonlyHandlers = {\n  get: shallowReadonlyGet,\n  set: (target, key, value) => {\n    console.log('set on key is faild')\n  }\n}\n\nfunction createGetter(isReadOnly = false, shallow = false) {\n  return function get(target, key, receiver) {\n    // proxy + reflect搭配使用\n    const res = Reflect.get(target, key, receiver)// target[key]\n    if (!isReadOnly) {\n      // 收集依赖\n      Track(target, TrackOpType.GET, key)\n\n    }\n    if (shallow) {\n      return res\n    }\n    // \n    if (isObject(res)) {\n      return isReadOnly ? readonly(res) : reactive(res) // 递归\n    }\n    // return res + '  <<<-代理后的结果'\n    console.log(res + '  <<<-代理后的结果')\n    return res\n  }\n}\nfunction createSetter(shallow = false) {\n  return function set(target, key, value, receiver) {\n    const oldValue = target[key]\n    console.log('oldValue', oldValue)\n    // 判断是否是数组\n    let haskey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key)\n    console.log(haskey)\n    if (!haskey) {\n      // 没有 就是新增值\n      trigger(target, TriggerOpTypes.ADD, key, value)\n    }else{\n      // 修改\n      if(hasChanged(value, oldValue)){\n\n      trigger(target, TriggerOpTypes.SET,key,value,oldValue)\n      }\n    }\n    const result = Reflect.set(target, key, value, receiver) // 设置最新值并返回设置是否成功 true / false\n    console.log('set==>result=> ', result)\n    return result\n  }\n}\n","import { isObject } from \"@vue/shared\"\nimport {reactiveHandlers,shallowReactiveHandlers,readonlyHandlers,shallowReadonlyHandlers} from './baseHandlers'\n\n\nexport function reactive(target) {\n  return createReactObj(target, false, reactiveHandlers)\n}\nexport function shallowReactive(target) {\n  return createReactObj(target, false, shallowReactiveHandlers)\n\n}\nexport function readonly(target) {\n  return createReactObj(target, true, readonlyHandlers)\n\n}\nexport function shallowReadonly(target) {\n  return createReactObj(target, true, shallowReadonlyHandlers)\n}\n// 数据结构\nconst reactiveMap = new WeakMap() // key 必须是对象, 自动垃圾回收 用来存放代理对象\nconst readonlyMap = new WeakMap() // 用来存放代理对象\n// 实现代理的核心\nfunction createReactObj(target, isReadonly, baseHandlers) {\n  \n  // proxy() 对象\n  if(!isObject(target)) {\n    return target // 不是对象不进行处理\n  }\n  const proxymap = isReadonly? readonlyMap : reactiveMap\n  const proxyEs = proxymap.get(target)\n  if(proxyEs) {\n    return proxyEs // 已经代理的直接返回\n  }\n  // 核心  proxy\n  const proxy = new Proxy(target, baseHandlers)\n  proxymap.set(target, proxy) // 存放数据,不会重复代理\n  return proxy\n}","import { hasChanged,isArray } from '@vue/shared';\nimport { Track, trigger } from \"./effect\"\nimport { TrackOpType,TriggerOpTypes } from \"./operations\"\n\n// \nexport function ref(target) {\n  return createRef(target)\n}\nexport function shallowRef(target) {\n  return createRef(target,true)\n}\nclass RefImpl{\n  public __v_isRef = true\n  public _value\n  constructor(public rawValue,public shallow) {\n    this._value = rawValue // 用户传入的值\n  }\n  get value() {\n    Track(this, TrackOpType.GET, 'value') // 收集依赖\n    return this._value\n  }\n  set value(newValue) {\n    if(hasChanged) {\n      this._value = newValue\n      this.rawValue = newValue\n      trigger(this,TriggerOpTypes.SET, 'value', newValue)\n    }\n  }\n}\nfunction createRef(target, shallow = false) {\n  return new RefImpl(target, shallow)\n} \nexport function toRef(target,key) {\n  return new ObjectRefImpl(target,key)\n}\nclass ObjectRefImpl{\n  public __v_isRef = true\n  constructor(public target,public key) {\n\n  }\n  get value() {\n    return this.target[this.key]\n  }\n  set value(newValue) {\n    this.target[this.key] = newValue\n  }\n}\nexport function toRefs(target) {\n  let ret = isArray(target) ? new Array(target.length) : {}\n  for(let key in target) {\n    ret[key] = toRef(target, key)\n  }\n  return ret\n}","import { isFunction } from '@vue/shared';\nimport { effect } from './effect'\nexport function computed(getterOrOptions) {\n  // 传过来的参数可能是函数或者对象\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions,\n      setter = () => {\n        console.log('computed value must be readonly')\n      }\n  } else {\n    getter = getterOrOptions.get\n    setter = getterOrOptions\n  }\n  //返回值\n  return new ComputedRefImpl(getter, setter)\n}\nclass ComputedRefImpl {\n  public _dirty = true;\n  public _value;\n  public effect\n  constructor(getter, public setter) {\n    this.effect = effect(getter, {\n      lazy: true, sch: () => {\n        if (!this._dirty) {\n          this._dirty = true\n        }\n      }\n    })\n  }\n  get value() {\n    if (this._dirty) {\n      this._value = this.effect()\n      this._dirty = false\n    }\n    return this._value\n  }\n  set value(newValue) {\n    this._value = newValue\n  }\n}"],"names":[],"mappings":"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"}